(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Edge, Graph, Node, SpatialHash;

SpatialHash = require('./spatial');

Node = (function() {
  function Node(x, y) {
    this.x = x;
    this.y = y;
  }

  Node.prototype.clone = function() {
    return new Node(this.x, this.y);
  };

  Node.prototype.isEqual = function(other) {
    return this.x === other.x && this.y === other.y;
  };

  return Node;

})();

Edge = (function() {
  function Edge(a, b, thickness) {
    this.a = a;
    this.b = b;
    this.thickness = thickness != null ? thickness : 10;
  }

  Edge.prototype.isEqual = function(other) {
    return (this.a.isEqual(other.a)) && (this.b.isEqual(other.b)) || (this.b.isEqual(other.a)) && (this.a.isEqual(other.b));
  };

  Edge.prototype.isAttachedTo = function(node) {
    return (this.a.isEqual(node)) || (this.b.isEqual(node));
  };

  return Edge;

})();

module.exports = Graph = (function() {
  function Graph() {
    this.map = new SpatialHash();
    this.edges = [];
    console.log('edges');
  }

  Graph.prototype.getEdgesAttachedTo = function(node) {
    var e, edges, _i, _len, _ref;
    edges = [];
    _ref = this.edges;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      e = _ref[_i];
      if (e.isAttachedTo(node)) {
        edges.push(e);
      }
    }
    return edges;
  };

  Graph.prototype.hasEdge = function(edge) {
    return (this.getEdge(edge)) !== void 0;
  };

  Graph.prototype.getEdge = function(edge) {
    var e, _i, _len, _ref;
    _ref = this.edges;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      e = _ref[_i];
      if (e.isEqual(edge)) {
        return e;
      }
    }
    return void 0;
  };

  Graph.prototype.addEdge = function(a, b) {
    var edge;
    this.a = a;
    this.b = b;
    edge = this.getEdge({
      a: this.a,
      b: this.b
    });
    if (edge === void 0) {
      edge = new Edge(this.a, this.b);
      this.edges.push(edge);
    }
    return edge;
  };

  Graph.prototype.addNode = function(position) {
    if ((this.map.get(position)) === void 0) {
      return this.map.set(new Node(position.x, position.y));
    }
  };

  Graph.prototype.changeNode = function(old_pos, new_pos) {
    if ((this.map.get(old_pos)) !== void 0) {
      return this.map.change(old_pos, new_pos);
    }
  };

  return Graph;

})();


},{"./spatial":3}],2:[function(require,module,exports){
var Editor, Floorplan, Graph, UndoStack, editor, findIntersection, getLengthAndRotation, removeItemFrom, renderer, stage,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Graph = require('./graph');

stage = null;

renderer = null;

getLengthAndRotation = function(sp, ep) {
  return {
    middle: {
      x: (sp.x + ep.x) / 2,
      y: (sp.y + ep.y) / 2
    },
    length: Math.sqrt((sp.x - ep.x) * (sp.x - ep.x) + (sp.y - ep.y) * (sp.y - ep.y)),
    rotation: Math.atan2(ep.y - sp.y, ep.x - sp.x)
  };
};

findIntersection = function(a, b, a1, b1) {
  var denom, denomPositive, dx, dx1, dxa, dy, dy1, dya, intersection, s, t;
  dx = b.x - a.x;
  dy = b.y - a.y;
  dx1 = b1.x - a1.x;
  dy1 = b1.y - a1.y;
  denom = dx * dy1 - dx1 * dy;
  if (denom === 0) {
    return void 0;
  }
  denomPositive = denom > 0;
  dxa = a.x - a1.x;
  dya = a.y - a1.y;
  s = dx * dya - dy * dxa;
  if ((s < 0) === denomPositive) {
    return void 0;
  }
  t = dx1 * dya - dy1 * dxa;
  if ((t < 0) === denomPositive) {
    return void 0;
  }
  if ((s > denom) === denomPositive || (t > denom) === denomPositive) {
    return void 0;
  }
  t = t / denom;
  return intersection = {
    x: a.x + (t * dx),
    y: a.y + (t * dy)
  };
};

removeItemFrom = function(array, item) {
  var index;
  index = array.indexOf(item);
  if (index > -1) {
    return array.splice(index, 1);
  }
};

Floorplan = (function() {
  function Floorplan() {
    this.walls = [];
  }

  Floorplan.prototype.addWall = function(wall) {
    var diff, intersection, part1, part2, w, _i, _len, _ref;
    diff = [];
    _ref = this.walls;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      w = _ref[_i];
      intersection = findIntersection(wall.a, wall.b, w.a, w.b);
      if (intersection !== void 0) {
        diff.push({
          operation: 'remove',
          type: 'wall',
          obj: w
        });
        part1 = {
          a: w.a,
          b: intersection
        };
        diff.push({
          operation: 'add',
          type: 'wall',
          obj: part1
        });
        part2 = {
          a: w.b,
          b: intersection
        };
        diff.push({
          operation: 'add',
          type: 'wall',
          obj: part2
        });
      }
    }
    diff.push({
      operation: 'add',
      type: 'wall',
      obj: wall
    });
    return diff;
  };

  return Floorplan;

})();

UndoStack = (function() {
  function UndoStack() {
    this.stack = [];
    this.redoStack = [];
  }

  UndoStack.prototype.constructUndoable = function(diffArray) {
    var diff, negated, state, _i, _len;
    state = [];
    for (_i = 0, _len = diffArray.length; _i < _len; _i++) {
      diff = diffArray[_i];
      negated = this._negateDiff(diff);
      state.push(negated);
    }
    return this.stack.push(state);
  };

  UndoStack.prototype.constructRedoable = function(diffArray) {
    var diff, negated, state, _i, _len;
    state = [];
    for (_i = 0, _len = diffArray.length; _i < _len; _i++) {
      diff = diffArray[_i];
      negated = this._negateDiff(diff);
      state.push(negated);
    }
    return this.redoStack.push(state);
  };

  UndoStack.prototype._negateAll = function(array) {
    var diff, negated, state, _i, _len;
    state = [];
    for (_i = 0, _len = diffArray.length; _i < _len; _i++) {
      diff = diffArray[_i];
      negated = this._negateDiff(diff);
      state.push(negated);
    }
    return state;
  };

  UndoStack.prototype._negateDiff = function(diff) {
    var negatedDiff;
    negatedDiff = {};
    if (diff.operation === 'add') {
      negatedDiff.operation = 'remove';
    } else if (diff.operation === 'remove') {
      negatedDiff.operation = 'add';
    }
    negatedDiff.type = diff.type;
    negatedDiff.obj = diff.obj;
    return negatedDiff;
  };

  UndoStack.prototype.undo = function() {
    var u;
    u = this.stack.pop();
    this.constructRedoable(u);
    console.log('undo length: ', this.stack.length);
    console.log('redo length: ', this.redoStack.length);
    return u;
  };

  UndoStack.prototype.redo = function() {
    var u;
    u = this.redoStack.pop();
    this.constructUndoable(u);
    console.log('undo length: ', this.stack.length);
    console.log('redo length: ', this.redoStack.length);
    return u;
  };

  return UndoStack;

})();

Editor = (function(_super) {
  __extends(Editor, _super);

  function Editor() {
    Editor.__super__.constructor.call(this);
    this.underlay = new PIXI.Graphics();
    this.underlay.hitArea = new PIXI.Rectangle(0, 0, 800, 600);
    this.underlay.interactive = true;
    this.addChild(this.underlay);
    this.tempGraphics = new PIXI.Graphics();
    this.addChild(this.tempGraphics);
    this.addUnderlayEvents(this.underlay);
    this.floorplan = new Floorplan();
    this.walls = [];
    this.undoStack = new UndoStack();
  }

  Editor.prototype.addUnderlayEvents = function(underlay) {
    underlay.mousedown = (function(_this) {
      return function(e) {
        _this.dragging = true;
        return _this.sp = {
          x: e.global.x,
          y: e.global.y
        };
      };
    })(this);
    underlay.mousemove = (function(_this) {
      return function(e) {
        if (_this.dragging) {
          _this.ep = {
            x: e.global.x,
            y: e.global.y
          };
          _this.tempGraphics.clear();
          _this.tempGraphics.lineStyle(10, 0xaa00aa);
          _this.tempGraphics.moveTo(_this.sp.x, _this.sp.y);
          _this.tempGraphics.lineTo(_this.ep.x, _this.ep.y);
          return renderer.render(stage);
        }
      };
    })(this);
    return underlay.mouseup = (function(_this) {
      return function(e) {
        _this.dragging = false;
        _this.tempGraphics.clear();
        _this.applyDiff(_this.floorplan.addWall({
          a: _this.sp,
          b: _this.ep
        }));
        return renderer.render(stage);
      };
    })(this);
  };

  Editor.prototype.applyDiff = function(diffs, putInUndoStack) {
    var diff, length, rotation, w, wall, wallToDelete, _i, _j, _len, _len1, _ref, _ref1;
    if (putInUndoStack == null) {
      putInUndoStack = true;
    }
    if (putInUndoStack) {
      this.undoStack.constructUndoable(diffs);
    }
    for (_i = 0, _len = diffs.length; _i < _len; _i++) {
      diff = diffs[_i];
      if (diff.operation === 'add') {
        if (diff.type === 'wall') {
          wall = new PIXI.Graphics();
          wall.beginFill(0xffffff * Math.random());
          _ref = getLengthAndRotation(diff.obj.a, diff.obj.b), length = _ref.length, rotation = _ref.rotation;
          wall.drawRect(0, -5, length, 10);
          wall.position.x = diff.obj.a.x;
          wall.position.y = diff.obj.a.y;
          wall.rotation = rotation;
          wall.ref = diff.obj;
          this.addChild(wall);
          this.walls.push(wall);
          this.floorplan.walls.push(diff.obj);
        }
      }
      if (diff.operation === 'remove') {
        if (diff.type === 'wall') {
          wallToDelete = void 0;
          _ref1 = this.walls;
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            w = _ref1[_j];
            if (w.ref === diff.obj) {
              wallToDelete = w;
              continue;
            }
          }
          this.removeChild(wallToDelete);
          removeItemFrom(this.walls, wallToDelete);
          removeItemFrom(this.floorplan.walls, wallToDelete.ref);
        }
      }
    }
    console.log('amount of editor  walls: ', this.walls.length);
    return console.log('amount of FP  walls: ', this.floorplan.walls.length);
  };

  return Editor;

})(PIXI.DisplayObjectContainer);

stage = new PIXI.Stage(0x888888);

renderer = new PIXI.autoDetectRenderer();

editor = new Editor();

stage.addChild(editor);

document.body.appendChild(renderer.view);

window.onload = function() {
  return renderer.render(stage);
};

window.undo = function() {
  var d;
  d = editor.undoStack.undo();
  editor.applyDiff(d, false);
  return renderer.render(stage);
};

window.redo = function() {
  var d;
  d = editor.undoStack.redo();
  editor.applyDiff(d, false);
  return renderer.render(stage);
};


},{"./graph":1}],3:[function(require,module,exports){
var SpatialHash;

module.exports = SpatialHash = (function() {
  function SpatialHash() {
    this.map = {};
  }

  SpatialHash.prototype.insert = function(node) {
    var existing;
    existing = this.get(node);
    if (existing !== void 0) {
      return existing;
    }
    return this.set(node);
  };

  SpatialHash.prototype.get = function(node) {
    return this.map["" + node.x + "_" + node.y];
  };

  SpatialHash.prototype.set = function(node) {
    return this.map["" + node.x + "_" + node.y] = node;
  };

  SpatialHash.prototype.remove = function(node) {
    var existing;
    existing = this.get(node);
    if (existing !== void 0) {
      delete this.map["" + node.x + "_" + node.y];
    }
    return existing;
  };

  SpatialHash.prototype.change = function(node, new_pos) {
    var existing;
    existing = this.remove(node);
    existing.x = new_pos.x;
    existing.y = new_pos.y;
    return this.insert(existing, new_pos);
  };

  return SpatialHash;

})();


},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvdXNyL2xvY2FsL2xpYi9ub2RlX21vZHVsZXMvd2F0Y2hpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9uaWtraWtvb2xlL1Byb2plY3RzL2xldmVsX2VkaXRvci9zb3VyY2UvZ3JhcGguY29mZmVlIiwiL1VzZXJzL25pa2tpa29vbGUvUHJvamVjdHMvbGV2ZWxfZWRpdG9yL3NvdXJjZS9tYWluLmNvZmZlZSIsIi9Vc2Vycy9uaWtraWtvb2xlL1Byb2plY3RzL2xldmVsX2VkaXRvci9zb3VyY2Uvc3BhdGlhbC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLDhCQUFBOztBQUFBLFdBQUEsR0FBYyxPQUFBLENBQVEsV0FBUixDQUFkLENBQUE7O0FBQUE7QUFHaUIsRUFBQSxjQUFFLENBQUYsRUFBTSxDQUFOLEdBQUE7QUFBVSxJQUFULElBQUMsQ0FBQSxJQUFBLENBQVEsQ0FBQTtBQUFBLElBQUwsSUFBQyxDQUFBLElBQUEsQ0FBSSxDQUFWO0VBQUEsQ0FBYjs7QUFBQSxpQkFDQSxLQUFBLEdBQU8sU0FBQSxHQUFBO1dBQ0MsSUFBQSxJQUFBLENBQUssSUFBQyxDQUFBLENBQU4sRUFBUyxJQUFDLENBQUEsQ0FBVixFQUREO0VBQUEsQ0FEUCxDQUFBOztBQUFBLGlCQUdBLE9BQUEsR0FBUyxTQUFDLEtBQUQsR0FBQTtXQUNKLElBQUMsQ0FBQSxDQUFELEtBQU0sS0FBSyxDQUFDLENBQVosSUFBa0IsSUFBQyxDQUFBLENBQUQsS0FBTSxLQUFLLENBQUMsRUFEMUI7RUFBQSxDQUhULENBQUE7O2NBQUE7O0lBSEosQ0FBQTs7QUFBQTtBQVVpQixFQUFBLGNBQUUsQ0FBRixFQUFNLENBQU4sRUFBVSxTQUFWLEdBQUE7QUFBeUIsSUFBeEIsSUFBQyxDQUFBLElBQUEsQ0FBdUIsQ0FBQTtBQUFBLElBQXBC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LENBQUEsRUFBQSxHQUFFLElBQUksQ0FBQyxDQUFQLEdBQVUsR0FBVixHQUFZLElBQUksQ0FBQyxDQUFqQixDQUFMLEdBQThCLEtBRDdCO0VBQUEsQ0FYTCxDQUFBOztBQUFBLHdCQWNBLE1BQUEsR0FBUSxTQUFDLElBQUQsR0FBQTtBQUNKLFFBQUEsUUFBQTtBQUFBLElBQUEsUUFBQSxHQUFXLElBQUMsQ0FBQSxHQUFELENBQUssSUFBTCxDQUFYLENBQUE7QUFDQSxJQUFBLElBQUcsUUFBQSxLQUFjLE1BQWpCO0FBQ0ksTUFBQSxNQUFBLENBQUEsSUFBUSxDQUFBLEdBQUksQ0FBQSxFQUFBLEdBQUUsSUFBSSxDQUFDLENBQVAsR0FBVSxHQUFWLEdBQVksSUFBSSxDQUFDLENBQWpCLENBQVosQ0FESjtLQURBO1dBR0EsU0FKSTtFQUFBLENBZFIsQ0FBQTs7QUFBQSx3QkFvQkEsTUFBQSxHQUFRLFNBQUMsSUFBRCxFQUFPLE9BQVAsR0FBQTtBQUNKLFFBQUEsUUFBQTtBQUFBLElBQUEsUUFBQSxHQUFXLElBQUMsQ0FBQSxNQUFELENBQVEsSUFBUixDQUFYLENBQUE7QUFBQSxJQUNBLFFBQVEsQ0FBQyxDQUFULEdBQWEsT0FBTyxDQUFDLENBRHJCLENBQUE7QUFBQSxJQUVBLFFBQVEsQ0FBQyxDQUFULEdBQWEsT0FBTyxDQUFDLENBRnJCLENBQUE7V0FHQSxJQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFBa0IsT0FBbEIsRUFKSTtFQUFBLENBcEJSLENBQUE7O3FCQUFBOztJQURKLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlNwYXRpYWxIYXNoID0gcmVxdWlyZSAnLi9zcGF0aWFsJ1xuXG5jbGFzcyBOb2RlXG4gICAgY29uc3RydWN0b3I6IChAeCwgQHkpIC0+XG4gICAgY2xvbmU6IC0+XG4gICAgICAgIG5ldyBOb2RlKEB4LCBAeSlcbiAgICBpc0VxdWFsOiAob3RoZXIpLT5cbiAgICAgICAgKEB4IGlzIG90aGVyLnggYW5kIEB5IGlzIG90aGVyLnkpXG5cbmNsYXNzIEVkZ2VcbiAgICBjb25zdHJ1Y3RvcjogKEBhLCBAYiwgQHRoaWNrbmVzcz0xMCkgLT5cbiAgICBpc0VxdWFsOihvdGhlcikgLT5cbiAgICAgICAgKChAYS5pc0VxdWFsIG90aGVyLmEpIGFuZCAoQGIuaXNFcXVhbCBvdGhlci5iKSBvclxuICAgICAgICAgKEBiLmlzRXF1YWwgb3RoZXIuYSkgYW5kIChAYS5pc0VxdWFsIG90aGVyLmIpKVxuICAgIGlzQXR0YWNoZWRUbzoobm9kZSkgLT5cbiAgICAgICAgKEBhLmlzRXF1YWwgbm9kZSkgb3IgKEBiLmlzRXF1YWwgbm9kZSlcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEdyYXBoXG4gICAgY29uc3RydWN0b3I6LT5cbiAgICAgICAgQG1hcCA9IG5ldyBTcGF0aWFsSGFzaCgpXG4gICAgICAgIEBlZGdlcyA9IFtdXG4gICAgICAgIGNvbnNvbGUubG9nICdlZGdlcydcblxuICAgIGdldEVkZ2VzQXR0YWNoZWRUbzogKG5vZGUpIC0+XG4gICAgICAgIGVkZ2VzID0gW11cbiAgICAgICAgZm9yIGUgaW4gQGVkZ2VzXG4gICAgICAgICAgICBpZiBlLmlzQXR0YWNoZWRUbyBub2RlXG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaCBlXG4gICAgICAgIGVkZ2VzXG4gICAgICAgIFxuICAgIGhhc0VkZ2U6IChlZGdlKSAtPlxuICAgICAgICAoQGdldEVkZ2UgZWRnZSkgaXNudCB1bmRlZmluZWRcbiAgICAgICAgXG4gICAgZ2V0RWRnZTogKGVkZ2UpIC0+XG4gICAgICAgIGZvciBlIGluIEBlZGdlc1xuICAgICAgICAgICAgaWYgZS5pc0VxdWFsIGVkZ2VcbiAgICAgICAgICAgICAgICByZXR1cm4gZVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkICAgICAgICBcblxuICAgIGFkZEVkZ2U6IChAYSwgQGIpIC0+XG4gICAgICAgIGVkZ2UgPSBAZ2V0RWRnZSh7QGEsIEBifSlcbiAgICAgICAgaWYgZWRnZSBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgIGVkZ2UgPSBuZXcgRWRnZShAYSwgQGIpXG4gICAgICAgICAgICBAZWRnZXMucHVzaCAoZWRnZSlcbiAgICAgICAgZWRnZVxuICAgICAgICAgIFxuICAgIGFkZE5vZGU6IChwb3NpdGlvbikgLT5cbiAgICAgICAgaWYgKEBtYXAuZ2V0IHBvc2l0aW9uKSBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgIEBtYXAuc2V0IG5ldyBOb2RlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpICAgIFxuICAgICAgICBcbiAgICBjaGFuZ2VOb2RlOiAob2xkX3BvcywgbmV3X3BvcykgLT5cbiAgICAgICAgaWYgKEBtYXAuZ2V0IG9sZF9wb3MpIGlzbnQgdW5kZWZpbmVkXG4gICAgICAgICAgICBAbWFwLmNoYW5nZShvbGRfcG9zLCBuZXdfcG9zKVxuIiwiR3JhcGggPSByZXF1aXJlICcuL2dyYXBoJ1xuXG5zdGFnZSA9IG51bGxcbnJlbmRlcmVyID0gbnVsbCAgICAgICAgICBcblxuZ2V0TGVuZ3RoQW5kUm90YXRpb24gPSAoc3AsIGVwKSAtPlxuICAgIG1pZGRsZToge3g6KHNwLngrZXAueCkgLyAyLCB5OihzcC55K2VwLnkpIC8gMn0gIyBtaWRkbGUgbm90IG5lZWRlZCBhbnltb3JlXG4gICAgbGVuZ3RoOiBNYXRoLnNxcnQoKHNwLngtZXAueCkgKiAoc3AueC1lcC54KSArIChzcC55LWVwLnkpICogKHNwLnktZXAueSkpXG4gICAgcm90YXRpb246IE1hdGguYXRhbjIoZXAueS1zcC55LCBlcC54LXNwLngpXG5cbmZpbmRJbnRlcnNlY3Rpb24gPSAoYSwgYiwgYTEsIGIxKSAtPlxuICAgIGR4ID0gYi54IC0gYS54XG4gICAgZHkgPSBiLnkgLSBhLnlcbiAgICBkeDEgPSBiMS54IC0gYTEueFxuICAgIGR5MSA9IGIxLnkgLSBhMS55XG4gICAgZGVub20gPSBkeCAqIGR5MSAtIGR4MSAqIGR5XG5cbiAgICBpZiBkZW5vbSBpcyAwXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcblxuICAgIGRlbm9tUG9zaXRpdmUgPSBkZW5vbSA+IDBcblxuICAgIGR4YSA9IGEueCAtIGExLnhcbiAgICBkeWEgPSBhLnkgLSBhMS55XG5cbiAgICBzID0gZHggKiBkeWEgLSBkeSAqIGR4YVxuXG4gICAgaWYgKHMgPCAwKSBpcyBkZW5vbVBvc2l0aXZlXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcblxuICAgIHQgPSBkeDEgKiBkeWEgLSBkeTEgKiBkeGFcblxuICAgIGlmICh0IDwgMCkgaXMgZGVub21Qb3NpdGl2ZVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICBpZiAocyA+IGRlbm9tKSBpcyBkZW5vbVBvc2l0aXZlIG9yICh0ID4gZGVub20pIGlzIGRlbm9tUG9zaXRpdmVcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICAgdCA9IHQgLyBkZW5vbVxuICAgIGludGVyc2VjdGlvbiA9IHg6YS54ICsgKHQgKiBkeCksIHk6YS55ICsgKHQgKiBkeSlcblxuXG5yZW1vdmVJdGVtRnJvbSA9IChhcnJheSwgaXRlbSkgLT5cbiAgICBpbmRleCA9IGFycmF5LmluZGV4T2YgaXRlbVxuICAgIGlmIGluZGV4ID4gLTFcbiAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgXG5cbmNsYXNzIEZsb29ycGxhblxuICAgIGNvbnN0cnVjdG9yOiAtPlxuICAgICAgICBAd2FsbHMgPSBbXVxuXG4gICAgYWRkV2FsbDogKHdhbGwpIC0+XG4gICAgICAgIGRpZmYgPSBbXVxuICAgICAgICBmb3IgdyBpbiBAd2FsbHNcbiAgICAgICAgICAgIGludGVyc2VjdGlvbiA9IGZpbmRJbnRlcnNlY3Rpb24od2FsbC5hLCB3YWxsLmIsIHcuYSwgdy5iKVxuICAgICAgICAgICAgaWYgaW50ZXJzZWN0aW9uIGlzbnQgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgZGlmZi5wdXNoICh7b3BlcmF0aW9uOidyZW1vdmUnLCB0eXBlOid3YWxsJywgb2JqOnd9KVxuICAgICAgICAgICAgICAgIHBhcnQxID0ge2E6dy5hLCBiOmludGVyc2VjdGlvbn1cbiAgICAgICAgICAgICAgICBkaWZmLnB1c2ggKHtvcGVyYXRpb246J2FkZCcsIHR5cGU6J3dhbGwnLCBvYmo6cGFydDF9KVxuICAgICAgICAgICAgICAgIHBhcnQyID0ge2E6dy5iLCBiOmludGVyc2VjdGlvbn1cbiAgICAgICAgICAgICAgICBkaWZmLnB1c2ggKHtvcGVyYXRpb246J2FkZCcsIHR5cGU6J3dhbGwnLCBvYmo6cGFydDJ9KVxuICAgICAgICBkaWZmLnB1c2ggKHtvcGVyYXRpb246J2FkZCcsIHR5cGU6J3dhbGwnLCBvYmo6d2FsbH0pICAgIFxuICAgICAgICBkaWZmXG5cblxuY2xhc3MgVW5kb1N0YWNrXG4gICAgY29uc3RydWN0b3I6IC0+XG4gICAgICAgICMgd2lsbCBrZWVwIHR3byBjb250YWluZXJzLlxuICAgICAgICBAc3RhY2sgPSBbXVxuICAgICAgICBAcmVkb1N0YWNrID0gW11cbiAgICAgICAgXG4gICAgY29uc3RydWN0VW5kb2FibGU6IChkaWZmQXJyYXkpIC0+XG4gICAgICAgICMgZ2l2ZW4gYW4gYXJyYXkgb2YgZGlmZnMsIHRoaXMgYmFieSBzaG91bGQgY3JlYXRlIGEgd2F5IG9mIHVuZG9pbmcgdGhhdC5cbiAgICAgICAgIyBpbiBhIHNlbnNlIGl0J3MganVzdCBhIG1hdHRlciBvZiBuZWdhdGluZyBlYWNoIGRpZmYuXG4gICAgICAgIHN0YXRlID0gW11cbiAgICAgICAgZm9yIGRpZmYgaW4gZGlmZkFycmF5XG4gICAgICAgICAgICBuZWdhdGVkID0gQF9uZWdhdGVEaWZmKGRpZmYpXG4gICAgICAgICAgICBzdGF0ZS5wdXNoIG5lZ2F0ZWRcbiAgICAgICAgQHN0YWNrLnB1c2ggc3RhdGVcbiAgICAgICAgXG4gICAgY29uc3RydWN0UmVkb2FibGU6IChkaWZmQXJyYXkpIC0+XG4gICAgICAgIHN0YXRlID0gW11cbiAgICAgICAgZm9yIGRpZmYgaW4gZGlmZkFycmF5XG4gICAgICAgICAgICBuZWdhdGVkID0gQF9uZWdhdGVEaWZmKGRpZmYpXG4gICAgICAgICAgICBzdGF0ZS5wdXNoIG5lZ2F0ZWRcbiAgICAgICAgQHJlZG9TdGFjay5wdXNoIHN0YXRlICBcbiAgICBfbmVnYXRlQWxsOiAoYXJyYXkpIC0+XG4gICAgICAgIHN0YXRlID0gW11cbiAgICAgICAgZm9yIGRpZmYgaW4gZGlmZkFycmF5XG4gICAgICAgICAgICBuZWdhdGVkID0gQF9uZWdhdGVEaWZmKGRpZmYpXG4gICAgICAgICAgICBzdGF0ZS5wdXNoIG5lZ2F0ZWRcbiAgICAgICAgc3RhdGVcbiAgICBfbmVnYXRlRGlmZjogKGRpZmYpIC0+XG4gICAgICAgIG5lZ2F0ZWREaWZmID0ge31cbiAgICAgICAgaWYgZGlmZi5vcGVyYXRpb24gaXMgJ2FkZCdcbiAgICAgICAgICAgIG5lZ2F0ZWREaWZmLm9wZXJhdGlvbiA9ICdyZW1vdmUnXG4gICAgICAgIGVsc2UgaWYgZGlmZi5vcGVyYXRpb24gaXMgJ3JlbW92ZSdcbiAgICAgICAgICAgIG5lZ2F0ZWREaWZmLm9wZXJhdGlvbiA9ICdhZGQnXG4gICAgICAgIG5lZ2F0ZWREaWZmLnR5cGUgPSBkaWZmLnR5cGVcbiAgICAgICAgbmVnYXRlZERpZmYub2JqID0gZGlmZi5vYmpcbiAgICAgICAgbmVnYXRlZERpZmZcblxuICAgIHVuZG86IC0+XG4gICAgICAgIHUgPSBAc3RhY2sucG9wKClcbiAgICAgICAgQGNvbnN0cnVjdFJlZG9hYmxlIHVcbiAgICAgICAgY29uc29sZS5sb2cgJ3VuZG8gbGVuZ3RoOiAnLEBzdGFjay5sZW5ndGhcbiAgICAgICAgY29uc29sZS5sb2cgJ3JlZG8gbGVuZ3RoOiAnLEByZWRvU3RhY2subGVuZ3RoXG4gICAgICAgIHVcbiAgICAgICAgXG4gICAgcmVkbzogLT5cbiAgICAgICAgdSA9IEByZWRvU3RhY2sucG9wKClcbiAgICAgICAgQGNvbnN0cnVjdFVuZG9hYmxlIHVcbiAgICAgICAgY29uc29sZS5sb2cgJ3VuZG8gbGVuZ3RoOiAnLEBzdGFjay5sZW5ndGhcbiAgICAgICAgY29uc29sZS5sb2cgJ3JlZG8gbGVuZ3RoOiAnLEByZWRvU3RhY2subGVuZ3RoICAgICAgICAgICAgICAgIFxuICAgICAgICB1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbmNsYXNzIEVkaXRvciBleHRlbmRzIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lclxuICAgIGNvbnN0cnVjdG9yOiAtPlxuICAgICAgICBzdXBlcigpXG4gICAgICAgIEB1bmRlcmxheSA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbiAgICAgICAgQHVuZGVybGF5LmhpdEFyZWEgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDgwMCw2MDApXG4gICAgICAgIEB1bmRlcmxheS5pbnRlcmFjdGl2ZSA9IHRydWVcbiAgICAgICAgQGFkZENoaWxkIEB1bmRlcmxheVxuICAgICAgICBAdGVtcEdyYXBoaWNzID0gbmV3IFBJWEkuR3JhcGhpY3MoKVxuICAgICAgICBAYWRkQ2hpbGQgQHRlbXBHcmFwaGljc1xuICAgICAgICBAYWRkVW5kZXJsYXlFdmVudHMoQHVuZGVybGF5KVxuICAgICAgICBAZmxvb3JwbGFuID0gbmV3IEZsb29ycGxhbigpXG4gICAgICAgIEB3YWxscyA9IFtdXG4gICAgICAgIEB1bmRvU3RhY2sgPSBuZXcgVW5kb1N0YWNrKClcbiAgICAgICAgXG4gICAgYWRkVW5kZXJsYXlFdmVudHM6ICh1bmRlcmxheSkgLT5cbiAgICAgICAgdW5kZXJsYXkubW91c2Vkb3duID0gKGUpID0+XG4gICAgICAgICAgICBAZHJhZ2dpbmcgPSB0cnVlXG4gICAgICAgICAgICBAc3AgPSB7eDplLmdsb2JhbC54LCB5OmUuZ2xvYmFsLnl9XG5cbiAgICAgICAgdW5kZXJsYXkubW91c2Vtb3ZlID0gKGUpID0+XG4gICAgICAgICAgICBpZiBAZHJhZ2dpbmdcbiAgICAgICAgICAgICAgICBAZXAgPSB7eDplLmdsb2JhbC54LCB5OmUuZ2xvYmFsLnl9XG4gICAgICAgICAgICAgICAgQHRlbXBHcmFwaGljcy5jbGVhcigpXG4gICAgICAgICAgICAgICAgQHRlbXBHcmFwaGljcy5saW5lU3R5bGUoMTAsMHhhYTAwYWEpXG4gICAgICAgICAgICAgICAgQHRlbXBHcmFwaGljcy5tb3ZlVG8oQHNwLngsIEBzcC55KVxuICAgICAgICAgICAgICAgIEB0ZW1wR3JhcGhpY3MubGluZVRvKEBlcC54LCBAZXAueSlcbiAgICAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXIgc3RhZ2VcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgdW5kZXJsYXkubW91c2V1cCA9IChlKSA9PlxuICAgICAgICAgICAgQGRyYWdnaW5nID0gZmFsc2VcbiAgICAgICAgICAgIEB0ZW1wR3JhcGhpY3MuY2xlYXIoKVxuICAgICAgICAgICAgQGFwcGx5RGlmZihAZmxvb3JwbGFuLmFkZFdhbGwoe2E6QHNwLCBiOkBlcH0pKVxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyIHN0YWdlXG5cbiAgICBhcHBseURpZmY6IChkaWZmcywgcHV0SW5VbmRvU3RhY2sgPSB0cnVlKSAtPlxuICAgICAgICBpZiBwdXRJblVuZG9TdGFja1xuICAgICAgICAgICAgQHVuZG9TdGFjay5jb25zdHJ1Y3RVbmRvYWJsZSBkaWZmc1xuICAgICAgICBmb3IgZGlmZiBpbiBkaWZmc1xuICAgICAgICAgICAgaWYgZGlmZi5vcGVyYXRpb24gaXMgJ2FkZCdcbiAgICAgICAgICAgICAgICBpZiBkaWZmLnR5cGUgaXMgJ3dhbGwnXG4gICAgICAgICAgICAgICAgICAgIHdhbGwgPSBuZXcgUElYSS5HcmFwaGljcygpXG4gICAgICAgICAgICAgICAgICAgIHdhbGwuYmVnaW5GaWxsKDB4ZmZmZmZmICogTWF0aC5yYW5kb20oKSlcbiAgICAgICAgICAgICAgICAgICAge2xlbmd0aCwgcm90YXRpb259ID0gZ2V0TGVuZ3RoQW5kUm90YXRpb24oZGlmZi5vYmouYSwgZGlmZi5vYmouYilcbiAgICAgICAgICAgICAgICAgICAgd2FsbC5kcmF3UmVjdCgwLCAtNSwgbGVuZ3RoLCAxMClcbiAgICAgICAgICAgICAgICAgICAgd2FsbC5wb3NpdGlvbi54ID0gZGlmZi5vYmouYS54XG4gICAgICAgICAgICAgICAgICAgIHdhbGwucG9zaXRpb24ueSA9IGRpZmYub2JqLmEueVxuICAgICAgICAgICAgICAgICAgICB3YWxsLnJvdGF0aW9uID0gcm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgd2FsbC5yZWYgPSBkaWZmLm9ialxuICAgICAgICAgICAgICAgICAgICBAYWRkQ2hpbGQgd2FsbFxuICAgICAgICAgICAgICAgICAgICBAd2FsbHMucHVzaCB3YWxsXG4gICAgICAgICAgICAgICAgICAgIEBmbG9vcnBsYW4ud2FsbHMucHVzaCBkaWZmLm9ialxuICAgICAgICAgICAgaWYgZGlmZi5vcGVyYXRpb24gaXMgJ3JlbW92ZSdcbiAgICAgICAgICAgICAgICBpZiBkaWZmLnR5cGUgaXMgJ3dhbGwnXG4gICAgICAgICAgICAgICAgICAgIHdhbGxUb0RlbGV0ZSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICBmb3IgdyBpbiBAd2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHcucmVmIGlzIGRpZmYub2JqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbFRvRGVsZXRlID0gd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgICAgIEByZW1vdmVDaGlsZCB3YWxsVG9EZWxldGVcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSXRlbUZyb20gQHdhbGxzLCB3YWxsVG9EZWxldGVcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSXRlbUZyb20gQGZsb29ycGxhbi53YWxscywgd2FsbFRvRGVsZXRlLnJlZlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2cgJ2Ftb3VudCBvZiBlZGl0b3IgIHdhbGxzOiAnLEB3YWxscy5sZW5ndGhcbiAgICAgICAgY29uc29sZS5sb2cgJ2Ftb3VudCBvZiBGUCAgd2FsbHM6ICcsIEBmbG9vcnBsYW4ud2FsbHMubGVuZ3RoXG5cbnN0YWdlID0gbmV3IFBJWEkuU3RhZ2UoMHg4ODg4ODgpXG5yZW5kZXJlciA9IG5ldyBQSVhJLmF1dG9EZXRlY3RSZW5kZXJlcigpXG5lZGl0b3IgPSBuZXcgRWRpdG9yKClcbnN0YWdlLmFkZENoaWxkIGVkaXRvclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCByZW5kZXJlci52aWV3XG5cblxuXG5cbiNmbG9vcnBsYW4uYWRkV2FsbCh7YTphLCBiOmJ9KVxuXG53aW5kb3cub25sb2FkID0gLT5cbiAgICByZW5kZXJlci5yZW5kZXIgc3RhZ2VcbndpbmRvdy51bmRvID0gLT5cbiAgICAjY29uc29sZS5sb2cgJ3N0YWNrIGxlbmd0aDogJywgZWRpdG9yLnVuZG9TdGFjay5zdGFjay5sZW5ndGhcbiAgICAjZCA9IGVkaXRvci51bmRvU3RhY2suc3RhY2sucG9wKClcbiAgICBkID0gZWRpdG9yLnVuZG9TdGFjay51bmRvKClcbiAgICBlZGl0b3IuYXBwbHlEaWZmIGQsIGZhbHNlXG4gICAgcmVuZGVyZXIucmVuZGVyIHN0YWdlXG5cbndpbmRvdy5yZWRvID0gLT5cbiAgICBkID0gZWRpdG9yLnVuZG9TdGFjay5yZWRvKClcbiAgICBlZGl0b3IuYXBwbHlEaWZmIGQsIGZhbHNlXG4gICAgcmVuZGVyZXIucmVuZGVyIHN0YWdlXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNwYXRpYWxIYXNoXG4gICAgY29uc3RydWN0b3I6IC0+XG4gICAgICAgIEBtYXAgPSB7fVxuXG4gICAgaW5zZXJ0OiAobm9kZSkgLT5cbiAgICAgICAgZXhpc3RpbmcgPSBAZ2V0IG5vZGVcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nIGlmIGV4aXN0aW5nIGlzbnQgdW5kZWZpbmVkXG4gICAgICAgIEBzZXQgbm9kZVxuICAgICAgICAgICAgXG4gICAgZ2V0OiAobm9kZSkgLT5cbiAgICAgICAgQG1hcFtcIiN7bm9kZS54fV8je25vZGUueX1cIl1cblxuICAgIHNldDogKG5vZGUpIC0+XG4gICAgICAgIEBtYXBbXCIje25vZGUueH1fI3tub2RlLnl9XCJdID0gbm9kZVxuXG4gICAgcmVtb3ZlOiAobm9kZSkgLT5cbiAgICAgICAgZXhpc3RpbmcgPSBAZ2V0IG5vZGVcbiAgICAgICAgaWYgZXhpc3RpbmcgaXNudCB1bmRlZmluZWRcbiAgICAgICAgICAgIGRlbGV0ZSBAbWFwW1wiI3tub2RlLnh9XyN7bm9kZS55fVwiXVxuICAgICAgICBleGlzdGluZ1xuICAgICAgICBcbiAgICBjaGFuZ2U6IChub2RlLCBuZXdfcG9zKSAtPlxuICAgICAgICBleGlzdGluZyA9IEByZW1vdmUgbm9kZVxuICAgICAgICBleGlzdGluZy54ID0gbmV3X3Bvcy54XG4gICAgICAgIGV4aXN0aW5nLnkgPSBuZXdfcG9zLnlcbiAgICAgICAgQGluc2VydCBleGlzdGluZywgbmV3X3Bvc1xuIl19
